<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Benchmark Accessibility Gap</title>
    <meta name="description" content="Interactive visualization of the performance gap between frontier open and closed-source AI models across various benchmarks.">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 id="main-title">The performance gap between frontier <span class="text-open" id="category-open">open</span> and <span class="text-closed" id="category-closed">closed-source</span> models on <span id="benchmark-name">ECI</span> is around <span id="gap-value">--</span> months</h1>
            <p class="subtitle" id="benchmark-source">Source: Epoch AI Epoch Capabilities Index (Frontier Models only).</p>
        </header>

        <div class="controls-panel">
            <div class="control-group">
                <span class="control-label">Benchmark:</span>
                <select id="benchmark-select" class="benchmark-select">
                    <option value="eci">Epoch Capabilities Index (ECI)</option>
                    <!-- Additional options will be populated by script.js -->
                </select>
            </div>
            <div class="control-group">
                <span class="control-label">Gap Metric:</span>
                <div class="toggle-buttons" id="gap-toggle">
                    <button class="toggle-btn active" data-value="average">Average Gap</button>
                    <button class="toggle-btn" data-value="current">Current Gap (Est.)</button>
                </div>
            </div>
            <div class="control-group">
                <span class="control-label">Framing:</span>
                <div class="toggle-buttons" id="framing-toggle">
                    <button class="toggle-btn active" data-value="open">Open vs Closed</button>
                    <button class="toggle-btn" data-value="china">China vs US</button>
                </div>
            </div>
        </div>

        <div class="legend">
            <div class="legend-item">
                <span class="legend-marker closed-marker"></span>
                <span id="legend-closed">Closed model</span>
            </div>
            <div class="legend-item">
                <span class="legend-marker closed-unmatched"></span>
                <span id="legend-unmatched">Closed model not yet matched by open models</span>
            </div>
            <div class="legend-item">
                <span class="legend-marker open-marker"></span>
                <span id="legend-open">Open model</span>
            </div>
            <div class="legend-item">
                <span class="legend-connector"></span>
                <span id="legend-connector">First open model to match score</span>
            </div>
        </div>

        <div id="chart-container">
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>Loading ECI data...</p>
            </div>
            <div id="chart"></div>
            <p class="subtitle" id="chart-note" style="text-align: center; margin-top: var(--spacing-sm);">
                Note: A model is deemed to have caught up if its score is <strong>within the threshold</strong> of the reference model.<br>
                <em>Average gap is computed by sampling 100 score levels and measuring time-to-match at each level, starting from the level where reference models first appear.<br>
                Matched/Unmatched counts reflect all reference models shown on the chart.</em>
            </p>
        </div>

                <div class="stats-panel">
            <div class="stat-card">
                <div class="stat-value" id="stat-avg-gap">--</div>
                <div class="stat-label">Average Gap</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="stat-ci">--</div>
                <div class="stat-label">90% CI</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="stat-matched">--</div>
                <div class="stat-label">Matched Models</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="stat-unmatched">--</div>
                <div class="stat-label">Unmatched</div>
            </div>
        </div>

        <div id="current-gap-explainer" class="explainer-panel hidden">
            <div class="explainer-header">
                <strong>How is the current gap estimated?</strong>
            </div>
            <div class="explainer-content">
                <p>The <strong>average gap</strong> (<span id="explainer-avg-gap">--</span> months) is based on historical matched pairs, but this may underestimate the <em>current</em> gap because it doesn't fully account for models that haven't been matched yet.</p>

                <p>The <strong>estimated current gap</strong> treats unmatched frontier models as <strong>censored observations</strong> &mdash; they tell us the gap is <em>at least</em> as long as their age:</p>

                <ul id="unmatched-ages-list"></ul>

                <p><strong>Methodology:</strong> We use survival analysis with Maximum Likelihood Estimation:</p>
                <ol>
                    <li><strong>Fit prior:</strong> A log-normal distribution is fit to historical matched gaps</li>
                    <li><strong>Censored likelihood:</strong> Unmatched models contribute P(gap &gt; observed_age) to the likelihood</li>
                    <li><strong>Truncated expectation:</strong> For each unmatched model, compute E[gap | gap &gt; age] using the truncated log-normal formula</li>
                    <li><strong>Weighted estimate:</strong> Combine expectations, weighting older models more heavily (they're more informative)</li>
                </ol>

                <p class="explainer-note">
                    <strong>Minimum bound:</strong> <span id="min-bound-value">--</span> months &mdash; the gap cannot be shorter than the age of the oldest unmatched model.
                </p>

                <div class="distribution-section">
                    <p><strong>Gap Distribution (Log-Normal Prior):</strong></p>
                    <div id="distribution-chart" style="width: 100%; height: 200px;"></div>
                </div>
            </div>
        </div>

        <div class="header">
            <h1>Gap Over Time</h1>
            <p class="subtitle">How the performance gap has evolved historically.</p>
        </div>
        <div id="historical-chart-container" style="position: relative; min-height: 400px; margin-bottom: 2rem;">
             <div id="historical-chart" style="width: 100%; height: 400px;"></div>
        </div>

        <div class="header">
            <h1 id="trend-title">Score Growth Trends (Pre vs Post April 2024)</h1>
            <p class="subtitle" id="trend-subtitle">Comparing the rate of score increases before and after April 2024 (All Models).</p>
        </div>
        <div id="trend-chart-container" style="position: relative; min-height: 500px; margin-bottom: 2rem;">
             <div id="trend-chart" style="width: 100%; height: 500px;"></div>
        </div>

        <details class="data-panel">
            <summary class="data-summary" id="data-summary">View Raw Data (All Models)</summary>
            <div class="table-container">
                <table id="eci-table">
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>Release Date</th>
                            <th id="score-header">Score</th>
                            <th>Type</th>
                            <th>Organization</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data will be populated by script.js -->
                    </tbody>
                </table>
            </div>
        </details>

        <footer class="footer">
            <p>Data provided by <a href="https://epoch.ai" target="_blank" rel="noopener">Epoch AI</a> under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener">CC BY 4.0 License</a>.</p>
            <p style="font-size: 0.8em;">Last updated: <span id="last-updated">--</span></p>
        </footer>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>
